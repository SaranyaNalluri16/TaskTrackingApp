<h3 style="text-align: center;">📄 View Tasks</h3>
<!-- Link to Add Task Page -->
<div style="text-align: center; margin-bottom: 10px;">
  <a routerLink="/add-task">➕ Add New Task</a>
</div>
<!-- Filters and Sorting Controls -->
<div style="text-align: center; margin-bottom: 15px;">
  <!-- Search bar -->
  <input type="text" [(ngModel)]="searchTerm" placeholder="🔍 Search by name" />
  <!-- Status filter -->
  <select [(ngModel)]="statusFilter">
    <option value="">All Statuses</option>
    <option>Pending</option>
    <option>In Progress</option>
    <option>Completed</option>
  </select>
  <!-- Priority filter -->
  <select [(ngModel)]="priorityFilter">
    <option value="">All Priorities</option>
    <option>Low</option>
    <option>Medium</option>
    <option>High</option>
  </select>
  <!-- Sort option -->
  <select [(ngModel)]="sortField">
    <option value="">Sort By</option>
    <option value="priority">Priority</option>
    <option value="status">Status</option>
  </select>
</div>
<!-- Task Table -->
<table align="center" border="1" *ngIf="sortedTasks.length > 0">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Due Date</th>
      <th>Priority</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <!-- Loop through tasks -->
    <tr *ngFor="let task of sortedTasks; let i = index">
      <!-- Normal display mode -->
      <ng-container *ngIf="editIndex !== i; else editMode">
        <td>{{ task.name }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.dueDate }}</td>
        <td>{{ task.priority }}</td>
        <td>
          <!-- Status dropdown -->
          <select [(ngModel)]="task.status" (change)="updateStatus(i)">
            <option>Pending</option>
            <option>In Progress</option>
            <option>Completed</option>
          </select>
        </td>
        <td class="actions">
          <!-- Edit button -->
          <button class="edit" (click)="startEdit(i)">✏️ Edit</button>
          <!-- Delete button -->
          <button class="delete" (click)="deleteTask(i)">🗑️ Delete</button>
          <!-- Mark as completed -->
          <button *ngIf="task.status !== 'Completed'" 
                  (click)="updateStatusToCompleted(i)" 
                  class="complete">
            ✅ Completed
          </button>
          <!-- Undo completion -->
          <button *ngIf="task.status === 'Completed'" 
                  (click)="setStatus(i, 'In Progress')" 
                  class="undo">
            🔄 Undo
          </button>
        </td>
      </ng-container>
      <!-- Edit mode -->
      <ng-template #editMode>
        <td><input [(ngModel)]="editedTask.name" /></td>
        <td><input [(ngModel)]="editedTask.description" /></td>
        <td><input type="date" [(ngModel)]="editedTask.dueDate" /></td>
        <td>
          <select [(ngModel)]="editedTask.priority">
            <option>Low</option>
            <option>Medium</option>
            <option>High</option>
          </select>
        </td>
        <td>
          <select [(ngModel)]="editedTask.status">
            <option>Pending</option>
            <option>In Progress</option>
            <option>Completed</option>
          </select>
        </td>
        <td>
          <button (click)="saveEdit()">💾 Save</button>
          <button (click)="cancelEdit()">❌ Cancel</button>
        </td>
      </ng-template>
    </tr>
  </tbody>
</table>
<!-- Message when no tasks are available -->
<div *ngIf="sortedTasks.length === 0">
  <p style="text-align: center;">No tasks found.</p>
</div>
